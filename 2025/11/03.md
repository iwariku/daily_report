 ##  取り組んだ課題一覧

- RESTについて学ぶ
- RESTについて理解する

 ##  わかったこと

- 認証、認可
    - 認証とは「本人特定」
    - 認可とは「アクセス制御」
    - ユーザーがサーバーへアクセスしてきた時に、「誰」であるかを特定することが認証(ログイン)、ログインした後、リソースに対してアクセスして良いか？悪いかというアクセス制御するのことを認証という

- JSON Web Token(JWT)

    **特徴**
    - 署名による改ざんチェック
    - データの中身はJSON形式

    **用途**
    - 認証結果をサーバーサイドで保持せずクライアントサイドで保持(ステートレスな通信の実現)

- 大量アクセス対策としてレートリミット(時間あたりのアクセス制限)

    レートリミットで考慮すること

| 観点| 設定例 |
|-----|-----|
| 誰に対して    |  APIキー、ユーザーID   |
| 何に対して  |  単一機能、機能群、API全体...   |
| 制限回数    |  10回、100回、1000回...   |
| 単位時間    |  10分、1時間、1日...   |

- アクセス制限の緩和
    - 接続元によっては特別な緩和措置が必要なケースがある
    - サービス利用が多く、自社にとって優良顧客である場合
    - キャンペーンなど、一時的に負荷増大がある場合
- 上記のような場合は、アクセス元ごとに一時的に設定変更できる仕組みを考慮する

### APIに関連するセキュリティ

**XSS(クロスサイトスクリプティング)**
| 種類| 概要 |
|-----|-----|
| 脆弱性    |  悪意のあるユーザーが正規のサイトに不正なスクリプトを挿入することで、正規のユーザーの情報を不正に引き出したり操作できてしまう問題  |
| 対策  |  レスポンスヘッダーの追加<br>`X-XSS-Protection`に"1"でフィルタリングを有効化 <br>`X-Frame-Options` "DENY"でframeタグ呼び出しを拒否<br>`X-Content-Type-Options` "nosniff"でIE脆弱性対応 |

**CSRF(クロスサイト・リクエスト・フォージェリ)**

| 種類| 概要 |
|-----|-----|
| 脆弱性    |  本来拒否しなければいけないアクセス元(許可しないアクセス元)からくるリクエストを処理してしまう問題  |
| 対策  | ・許可しないアクセス元からのリクエストを拒否<br>`X-API-Key (*) `システム単位で実行可否判断<br>`Authentication`ユーザー単位で実行可否判断・攻撃者に推測されにくいトークンの発行/照合処理を実装<br>`X-CSRF-TOKEN (*) `トークンを使って実行可否判断<br>`(*)`は独自ヘッダー。標準仕様ではないので、独自に設定する。    |

**HTTP**

| 種類| 概要 |
|-----|-----|
| 脆弱性    |  通信経路が暗号化されないので盗聴されやすい  |
| 対策  | ・常時HTTPSを利用した通信にする    |

**SSL/TLS/HTTPSの違い**

| 名称| 概要 |
|-----|-----|
| SSL  |  安全に通信を行うためのプロトコル。2015年に使用禁止  |
| TLS | 安全に通信を行うためのプロトコル。SSLの後継。    |
| HTTPS | HTTP+SSL/TLS。Webで安全に通信するプロトコル    |

**JSON Web Token (JWT)**

| 種類| 概要 |
|-----|-----|
| 脆弱性    | クライアント側で内容の確認/編集が簡単にできるため、サーバー側の検証が不十分だと改ざんされた情報を正規として受け入れてしまう   |
| 対策  | ・ヘッダーのalgに"none"以外を指定して署名を暗号化する<br>{<br>"typ":  "JWT",<br>"alg": "ES256"<br>}<br>・ペイロードのaudに想定する利用者を指定して受信時に検証する<br>{<br>"sub" : "123456",<br>"name" : "John Doe",<br>"aud" : "https://api.example.com/"<br>}|

### JavaScript
- 論理型の変数を宣言する時は、変数名の最初に`is`をつける
- `++x`はその地点の処理にて、加算されたものが適応される
- `x++`は現在の地点ではそのままの値で、次の処理以降で加算されたものが適応される
- Falsyな値は`undifined`,`null`,`0`,`("")`,`NaN`
- `switch`文で`braak`を記述しないと、switch分から抜け出さない
- `for (let 格納する変数 of 配列を格納している変数)`配列の全ての要素に対して繰り返し文の処理を行う
 
##  次やること

- JavaScriptの基本

 ##  感じたこと

- だいぶRESTの理解が深まった。達人に学ぶDB設計も含めてだけど、設計という点をしっかり理解していないといいシステムが作れないことが知れた。次はクリーンアーキテクチャとかコーディングに対する設計書を読んでみたい

 ##  学習時間
- today: 4.5h
- month: 20h
- total: 331h
