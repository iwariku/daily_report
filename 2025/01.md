 ##  取り組んだ課題一覧

- 米国AI開発者がゼロから教えるDocker講座 セクション8

 ##  わかったこと

- `du -sh ファイル`ファイルのサイズを確認
- `build context`Dockerfileがあるディレクトリ全体を指す
- `ADD`や`COPY`でbuild contextの中にあるファイルを`image`に持っていける
- `COPY`build contextにあるファイルをDokcer imageに組み込んで、最終的にコンテナで使うことができる
- `COPY <src>(ファイル) <dest(パス)>`
- `COPY`と`ADD`の違い
    - 単純にファイルやフォルダをコピーする場合は`COPY`を使う
    - tarの圧縮ファイルをコピーして解凍したい時は`ADD`を使う
- `ADD`tarファイルをDocker imageに持っていった際(buildした際)に解凍される
- `ADD <src>(ファイル) <dest(パス)>`
- `Dockerfile`という名のファイルがビルドコンテキストに入っていない場合
`docker build -f <dockerfilename> <build context>`

- 開発用とテスト用で`Dockerfile`を分けることが多いので、`-f`で`Dockerfile`を指定する

- `ENTORYPOINT`でのデフォルトのコマンドを指定することができる
    - `ENTORYPOINT`は上書きができない
    - `ENTORYPOINT`がある場合は、`CMD`は["params1","params2, ..."]の形をとる(つまりENTORYPOINTで指定したコマンドの引数)
    - `RUN`時に上書きできるのは`CMD`のみ
    - コンテナをコマンドのようにして使う

- `ENV`環境変数を設定する
    - `ENV <key> <value>`
    - `ENV <key>=<value>`

- `Dockerfile`に記述してある内容(FROMやRUN)は`docker build`で実行される。`docker run`では、すでに実行されて作られたイメージを使ってコンテナを作る

<hr>

```
FROM ubuntu:latest
RUN mkdir sample_folder
RUN cd sample_folder
RUN touch sample_file
``` 
`RUN`というinstructionは全て`/`から始まる独立したシェルで実行される。
なので、以下の
```
RUN cd sample_folder
RUN touch sample_file
```
は、sample_folderには移動して終わり、階層が変わったのは引き継がれない、その後のRUNは`/`で実行となる為、sample_folder内には作成されない
<hr>

- `WORKDIR` Docker instructionの実行ディレクトリを変更する
- `WORKDIR <絶対path>`

```
FROM ubuntu:latest
RUN mkdir sample_folder
WORKDIR cd sample_folder
RUN touch sample_file
``` 
<hr>

 ##  次やること
- 米国AI開発者がゼロから教えるDocker講座 セクション9

 ##  感じたこと

- ADDとCOPYの違いや、Dockerfileがbuild context内にない場合のdocker build方法など、実務でよく使う事、気を付ける点を理解できてよかった

 ##  学習時間
- today: 2.75h
- total: 216h
